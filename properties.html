<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PropEase — Properties</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body data-role="properties">
  <div class="topbar">
    <button class="hamburger" aria-label="menu">☰</button>

    <div class="brand-header">
      <img src="assets/logo.jpg" class="site-logo--small" alt="RACERSREALESTATE.CO">
      <div class="brand-text">RACERSREALESTATE.CO</div>
    </div>

    <div class="top-title">Properties</div>

    <div class="top-actions">
      <div class="muted" id="signedInAs">Signed in</div>
      <button id="logoutBtn" class="btn">Logout</button>
    </div>
  </div>

  <div class="layout">
    <aside class="sidebar">
      <div class="brand-mini"><img src="assets/logo.jpg" alt="logo"></div>
      <nav>
        <a href="admin.html"><span class="icon"><img src="assets/icons/dashboard.png" alt=""></span>Dashboard</a>
        <a href="properties.html" class="active"><span class="icon"><img src="assets/icons/properties.png" alt=""></span>Properties</a>
        <a href="leases.html"><span class="icon"><img src="assets/icons/leases.png" alt=""></span>Leases</a>
        <a href="clients.html"><span class="icon"><img src="assets/icons/clients.png" alt=""></span>Clients</a>
      </nav>
      <div class="support"><span class="icon"><img src="assets/icons/support.png" alt="support"></span>Help</div>
    </aside>

    <main class="main">
      <header>
        <h2>Property Portfolio</h2>
        <p class="muted">Browse properties, view occupancy and schedule viewings.</p>
      </header>

      <section style="display:flex;flex-direction:column;gap:12px">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
          <div style="display:flex;gap:8px;align-items:center">
            <input id="propSearch" placeholder="Search property or city" style="padding:10px;border-radius:8px;border:1px solid #eee;width:360px"/>
            <select id="propFilterCity" style="padding:10px;border-radius:8px;border:1px solid #eee">
              <option value="all">All cities</option>
              <option value="New York">New York</option>
              <option value="Chicago">Chicago</option>
              <option value="Boston">Boston</option>
              <option value="San Diego">San Diego</option>
            </select>
            <button id="btnFilterClear" class="btn">Clear</button>
          </div>

          <div style="display:flex;gap:8px">
            <button id="btnNewProperty" class="btn">New Property</button>
            <button id="btnExportProps" class="btn">Export</button>
          </div>
        </div>

        <div id="propertiesGrid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px"></div>

        <div class="card" style="padding:12px">
          <h4 style="margin:0 0 8px">Portfolio Summary</h4>
          <div id="propsSummary" class="muted">—</div>
        </div>
      </section>
    </main>
  </div>

  <!-- Property detail modal -->
  <div id="propModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;z-index:120">
    <div style="background:#fff;border-radius:10px;padding:18px;max-width:720px;width:100%;box-shadow:0 20px 50px rgba(0,0,0,0.25)">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 id="propModalTitle" style="margin:0">Property</h3>
        <button id="propModalClose" class="btn">Close</button>
      </div>
      <div id="propModalBody" style="margin-top:12px;color:#333"></div>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button id="propModalSchedule" class="btn primary">Schedule Viewing</button>
        <button id="propModalManage" class="btn">Manage</button>
      </div>
    </div>
  </div>

  <script src="js/script.js"></script>
  <script>
    (function(){
      const properties = [
        { id:'p1', name:'Midtown Residences', city:'New York', units:120, occupied:118, address:'120 Broadway Ave', img:'assets/prop1.jpg' },
        { id:'p2', name:'Riverside Home', city:'Chicago', units:88, occupied:83, address:'7 River St', img:'assets/prop2.jpg' },
        { id:'p3', name:'Backrooms Apartments', city:'Boston', units:54, occupied:49, address:'9 Oak St', img:'assets/prop3.jpg' },
        { id:'p4', name:'Harbor View', city:'San Diego', units:72, occupied:64, address:'1 Harbor Rd', img:'assets/prop4.jpg' },
        { id:'p5', name:'Elmwood Gardens', city:'Philadelphia', units:42, occupied:39, address:'221 Elmwood Ave', img:'https://picsum.photos/id/14/600/400' },
        { id:'p6', name:'Lakeside Manor', city:'Chicago', units:90, occupied:87, address:'33 Lake Shore Dr', img:'https://picsum.photos/id/15/600/400' },
        { id:'p7', name:'Sunset Villas', city:'Los Angeles', units:64, occupied:58, address:'88 Sunset Blvd', img:'https://picsum.photos/id/16/600/400' },
        { id:'p8', name:'Maple Terrace', city:'Boston', units:36, occupied:33, address:'12 Maple St', img:'https://picsum.photos/id/17/600/400' },
        { id:'p9', name:'Oak Ridge', city:'Denver', units:150, occupied:142, address:'400 Oak Ridge Rd', img:'https://picsum.photos/id/18/600/400' },
        { id:'p10', name:'Pier 9 Lofts', city:'San Diego', units:58, occupied:55, address:'9 Pier St', img:'https://picsum.photos/id/19/600/400' },
        { id:'p11', name:'Harborfront Suites', city:'Miami', units:120, occupied:112, address:'200 Harbor Blvd', img:'https://picsum.photos/id/20/600/400' },
        { id:'p12', name:'Cedar Place', city:'Seattle', units:48, occupied:45, address:'77 Cedar Ln', img:'https://picsum.photos/id/21/600/400' },
        { id:'p13', name:'Parkside Residences', city:'New York', units:80, occupied:76, address:'45 Park Ave', img:'https://picsum.photos/id/22/600/400' },
        { id:'p14', name:'Bluewater Apartments', city:'San Diego', units:66, occupied:60, address:'3 Bluewater Rd', img:'https://picsum.photos/id/23/600/400' },
        { id:'p15', name:'Stonebridge Court', city:'Chicago', units:110, occupied:105, address:'150 Stonebridge Ct', img:'https://picsum.photos/id/24/600/400' },
        { id:'p16', name:'Willow Creek', city:'Austin', units:44, occupied:40, address:'8 Willow Creek', img:'https://picsum.photos/id/25/600/400' },
        { id:'p17', name:'Grand Central Flats', city:'New York', units:200, occupied:196, address:'1 Grand Central', img:'https://picsum.photos/id/26/600/400' },
        { id:'p18', name:'Ridgeview Tower', city:'Denver', units:96, occupied:91, address:'99 Ridgeview Dr', img:'https://picsum.photos/id/27/600/400' },
        { id:'p19', name:'Northpoint Homes', city:'Philadelphia', units:30, occupied:28, address:'12 Northpoint Rd', img:'https://picsum.photos/id/28/600/400' },
        { id:'p20', name:'Seaview Estates', city:'Miami', units:72, occupied:68, address:'44 Seaview Ln', img:'https://picsum.photos/id/29/600/400' },
        { id:'p21', name:'Broadway Lofts', city:'New York', units:56, occupied:54, address:'210 Broadway', img:'https://picsum.photos/id/30/600/400' },
        { id:'p22', name:'Harbor Oaks', city:'San Diego', units:38, occupied:35, address:'6 Harbor Oaks', img:'https://picsum.photos/id/31/600/400' },
        { id:'p23', name:'Silver Lake Residences', city:'Los Angeles', units:84, occupied:80, address:'120 Silver Lake', img:'https://picsum.photos/id/32/600/400' },
        { id:'p24', name:'Millennial House', city:'Seattle', units:28, occupied:26, address:'5 Mill St', img:'https://picsum.photos/id/33/600/400' },
        { id:'p25', name:'Downtown Commons', city:'Chicago', units:140, occupied:136, address:'2 Downtown Pl', img:'https://picsum.photos/id/34/600/400' },
        { id:'p26', name:'The Conservatory', city:'Boston', units:50, occupied:47, address:'88 Conservatory Way', img:'https://picsum.photos/id/35/600/400' },
        { id:'p27', name:'Beacon Hill Flats', city:'Boston', units:60, occupied:58, address:'7 Beacon Hill', img:'https://picsum.photos/id/36/600/400' },
        { id:'p28', name:'Riverside Terrace', city:'Chicago', units:72, occupied:69, address:'101 River Terrace', img:'https://picsum.photos/id/37/600/400' },
        { id:'p29', name:'Crown Heights', city:'New York', units:130, occupied:125, address:'55 Crown St', img:'https://picsum.photos/id/38/600/400' },
        { id:'p30', name:'Greenwich Place', city:'New York', units:48, occupied:45, address:'14 Greenwich Ave', img:'https://picsum.photos/id/39/600/400' },
        { id:'p31', name:'Evergreen Park', city:'Seattle', units:66, occupied:62, address:'27 Evergreen Pkwy', img:'https://picsum.photos/id/40/600/400' },
        { id:'p32', name:'Sunrise Apartments', city:'Miami', units:54, occupied:50, address:'300 Sunrise Blvd', img:'https://picsum.photos/id/41/600/400' },
        { id:'p33', name:'Harborview Lofts', city:'San Diego', units:48, occupied:44, address:'14 Harborview Ave', img:'https://picsum.photos/id/42/600/400' },
        { id:'p34', name:'Lincoln Towers', city:'Chicago', units:160, occupied:152, address:'400 Lincoln St', img:'https://picsum.photos/id/43/600/400' },
        { id:'p35', name:'Chestnut Court', city:'Philadelphia', units:36, occupied:34, address:'19 Chestnut Ct', img:'https://picsum.photos/id/44/600/400' },
        { id:'p36', name:'Marina Bay Residences', city:'San Diego', units:74, occupied:70, address:'500 Marina Bay', img:'https://picsum.photos/id/45/600/400' },
        { id:'p37', name:'The Atrium', city:'Boston', units:90, occupied:86, address:'12 Atrium Way', img:'https://picsum.photos/id/46/600/400' },
        { id:'p38', name:'West End Flats', city:'Philadelphia', units:40, occupied:38, address:'77 West End', img:'https://picsum.photos/id/47/600/400' },
        { id:'p39', name:'Bayview Towers', city:'Miami', units:110, occupied:103, address:'11 Bayview Dr', img:'https://picsum.photos/id/48/600/400' },
        { id:'p40', name:'Pinecrest Estates', city:'Austin', units:52, occupied:49, address:'90 Pinecrest Ln', img:'https://picsum.photos/id/49/600/400' },
        { id:'p41', name:'Old Town Lofts', city:'Denver', units:46, occupied:44, address:'3 Old Town Sq', img:'https://picsum.photos/id/50/600/400' },
        { id:'p42', name:'Seaboard Residences', city:'Miami', units:68, occupied:65, address:'18 Seaboard Ave', img:'https://picsum.photos/id/51/600/400' },
        { id:'p43', name:'Civic Center Flats', city:'San Diego', units:34, occupied:31, address:'2 Civic Center', img:'https://picsum.photos/id/52/600/400' },
        { id:'p44', name:'Elm Park Tower', city:'Chicago', units:76, occupied:72, address:'144 Elm Park Rd', img:'https://picsum.photos/id/53/600/400' },
        { id:'p45', name:'The Foundry', city:'New York', units:98, occupied:94, address:'400 Foundry St', img:'https://picsum.photos/id/54/600/400' },
        { id:'p46', name:'Harbor Lane', city:'San Diego', units:28, occupied:25, address:'6 Harbor Ln', img:'https://picsum.photos/id/55/600/400' },
        { id:'p47', name:'Riverside Gardens', city:'Boston', units:62, occupied:59, address:'90 Riverside Gardens', img:'https://picsum.photos/id/56/600/400' },
        { id:'p48', name:'Vista Point', city:'Los Angeles', units:70, occupied:66, address:'77 Vista Point', img:'https://picsum.photos/id/57/600/400' },
        { id:'p49', name:'Market Street Lofts', city:'Philadelphia', units:82, occupied:79, address:'22 Market St', img:'https://picsum.photos/id/58/600/400' },
        { id:'p50', name:'Harborlight Residences', city:'Miami', units:124, occupied:118, address:'1 Harborlight Way', img:'https://picsum.photos/id/59/600/400' }
      ];


      const grid = document.getElementById('propertiesGrid');
      const summaryEl = document.getElementById('propsSummary');
      const searchInput = document.getElementById('propSearch');
      const cityFilter = document.getElementById('propFilterCity');

      function renderGrid(list){
        grid.innerHTML = list.map(p => `
          <div class="card" style="padding:12px;display:flex;flex-direction:column;gap:10px">
            <div style="display:flex;gap:12px;align-items:center">
              <div style="width:84px;height:64px;border-radius:8px;overflow:hidden;background:#f2f2f2;flex:0 0 84px">
                <img src="${p.img}" alt="${p.name}" style="width:100%;height:100%;object-fit:cover"/>
              </div>
              <div style="flex:1">
                <strong>${p.name}</strong>
                <div class="muted" style="font-size:13px">${p.address} • ${p.city}</div>
                <div style="margin-top:8px" class="muted">Occupancy: ${p.occupied}/${p.units}</div>
              </div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div class="muted" style="font-size:13px">Income est: $${Math.round(p.occupied * 1200).toLocaleString()}</div>
              <div>
                <button class="btn btn-view" data-id="${p.id}">View</button>
                <button class="btn btn-schedule" data-id="${p.id}">Schedule</button>
                <button class="btn btn-manage" data-id="${p.id}">Manage</button>
              </div>
            </div>
          </div>
        `).join('');
        attachCardActions();
        renderSummary(list);
      }

      function renderSummary(list){
        const total = list.length;
        const units = list.reduce((s,p)=>s+p.units,0);
        const occ = list.reduce((s,p)=>s+p.occupied,0);
        summaryEl.textContent = `Properties: ${total} • Units: ${units} • Occupied: ${occ} (${Math.round(occ/units*100)}%)`;
      }

      function attachCardActions(){
        grid.querySelectorAll('.btn-view').forEach(b=>{
          b.addEventListener('click', ev=>{
            const id = b.dataset.id;
            const p = properties.find(x=>x.id===id);
            showProperty(p);
          });
        });
        grid.querySelectorAll('.btn-schedule').forEach(b=>{
          b.addEventListener('click', ev=>{
            const id = b.dataset.id;
            alert('Schedule viewing for ' + id + ' (demo)');
          });
        });
        grid.querySelectorAll('.btn-manage').forEach(b=>{
          b.addEventListener('click', ev=>{
            const id = b.dataset.id;
            alert('Open management for ' + id + ' (demo)');
          });
        });
      }

      // property modal
      const modal = document.getElementById('propModal');
      function showProperty(p){
        if(!p) return;
        document.getElementById('propModalTitle').textContent = p.name;
        document.getElementById('propModalBody').innerHTML = `
          <img src="${p.img}" alt="${p.name}" style="width:100%;height:160px;object-fit:cover;border-radius:8px;margin-bottom:8px"/>
          <div><strong>Address:</strong> ${p.address}, ${p.city}</div>
          <div><strong>Units:</strong> ${p.units} • <strong>Occupied:</strong> ${p.occupied}</div>
          <div style="margin-top:8px" class="muted">Quick actions and contact details appear here.</div>
        `;
        modal.style.display = 'flex';
        document.getElementById('propModalSchedule').onclick = ()=>{ alert('Schedule viewing (demo)'); };
        document.getElementById('propModalManage').onclick = ()=>{ alert('Open management (demo)'); };
      }
      document.getElementById('propModalClose').addEventListener('click', ()=> modal.style.display='none');
      modal.addEventListener('click', ev => { if(ev.target === modal) modal.style.display='none'; });

      // filters
      function filtered(){
        const q = (searchInput.value||'').toLowerCase().trim();
        const city = (cityFilter.value||'all');
        return properties.filter(p=>{
          if(city !== 'all' && p.city !== city) return false;
          if(!q) return true;
          return (p.name + ' ' + p.city + ' ' + p.address).toLowerCase().includes(q);
        });
      }

      searchInput.addEventListener('input', ()=> renderGrid(filtered()));
      cityFilter.addEventListener('change', ()=> renderGrid(filtered()));
      document.getElementById('btnFilterClear').addEventListener('click', ()=>{ searchInput.value=''; cityFilter.value='all'; renderGrid(filtered());});

      // New property / export
      document.getElementById('btnNewProperty').addEventListener('click', ()=> alert('Open new property form (demo)'));
      document.getElementById('btnExportProps').addEventListener('click', ()=>{
        const csv = properties.map(p=>[p.id,p.name,p.city,p.units,p.occupied,p.address].join(',')).join('\n');
        const blob = new Blob([csv], {type:'text/csv'}); const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'properties.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      });

      // initial render
      renderGrid(properties);

      try {
        const s = sessionStorage.getItem('pe_session');
        if(s) document.getElementById('signedInAs').textContent = 'Signed in as ' + JSON.parse(s).name;
      } catch(e){}
      window.__demoProperties = properties;
    })();
  </script>
</body>
</html>
