<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PropEase — Agent</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body data-role="agent">
  <div class="topbar">
    <button class="hamburger" aria-label="menu">☰</button>

    <div class="brand-header">
      <img src="assets/logo.jpg" class="site-logo--small" alt="RACERSREALESTATE.CO">
      <div class="brand-text">RACERSREALESTATE.CO</div>
    </div>

    <div class="top-title">Agent Dashboard</div>

    <div class="top-actions">
      <div class="muted">Signed in as <strong>Agent Demo</strong></div>
      <button id="logoutBtn" class="btn">Logout</button>
    </div>
  </div>

  <div class="layout">
    <aside class="sidebar">
      <div class="brand-mini"><img src="assets/logo.jpg" alt="logo"></div>
      <nav>
        <a href="agent.html" class="active"><span class="icon"><img src="assets/icons/dashboard.png" alt=""></span>Overview</a>
        <a href="clients.html"><span class="icon"><img src="assets/icons/clients.png" alt=""></span>Clients</a>
        <a href="leads.html"><span class="icon"><img src="assets/icons/mail.png" alt=""></span>Leads</a>
        <a href="properties.html"><span class="icon"><img src="assets/icons/properties.png" alt=""></span>Properties</a>
        <a href="mail.html"><span class="icon"><img src="assets/icons/mail.png" alt=""></span>Mail</a>
        <a href="notifications.html"><span class="icon"><img src="assets/icons/notifications.png" alt=""></span>Notifications</a>
      </nav>
      <div class="support"><span class="icon"><img src="assets/icons/support.png" alt="support"></span>Help</div>
    </aside>

    <main class="main">
      <header>
        <h2>Agent — Clients & Leads</h2>
        <p class="muted">Manage inquiries, schedule viewings and communicate with clients.</p>
      </header>

      <section class="panel" style="display:grid;grid-template-columns:1fr 340px;gap:18px">
        <div>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-bottom:12px">
            <div class="card" style="padding:12px">
              <div class="muted">Open Leads (30d)</div>
              <div id="agentKpiLeads" class="big">24</div>
            </div>
            <div class="card" style="padding:12px">
              <div class="muted">Scheduled Viewings</div>
              <div id="agentKpiViewings" class="big">7</div>
            </div>
            <div class="card" style="padding:12px">
              <div class="muted">Active Clients</div>
              <div id="agentKpiClients" class="big">53</div>
            </div>
            <div class="card" style="padding:12px">
              <div class="muted">Unread Messages</div>
              <div id="agentKpiMsgs" class="big">5</div>
            </div>
          </div>

          <!-- Leads table -->
          <div class="card" style="padding:12px;margin-bottom:12px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <h4 style="margin:0">Recent Leads</h4>
              <div>
                <button class="btn" id="btnNewLead">New Lead</button>
                <button class="btn" id="btnExportLeads">Export</button>
              </div>
            </div>

            <div style="overflow:auto;margin-top:10px">
              <table class="table" style="min-width:820px">
                <thead><tr><th>Lead</th><th>Interested In</th><th>Source</th><th>Status</th><th>Next Step</th><th>Action</th></tr></thead>
                <tbody id="agentLeadsBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Schedule & communications -->
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div class="card" style="flex:1;min-width:320px;padding:12px">
              <h4 style="margin:0 0 8px">Upcoming Viewings</h4>
              <div id="agentViewingsList" class="muted" style="font-size:13px">
                <!-- populated by script -->
              </div>
            </div>

            <div class="card" style="flex:1;min-width:320px;padding:12px">
              <h4 style="margin:0 0 8px">Messages</h4>
              <div id="agentMessages" class="muted" style="font-size:13px">
                <!-- populated by script -->
              </div>
            </div>
          </div>
        </div>

        <aside>
          <div class="card" style="padding:12px;margin-bottom:12px">
            <h4 style="margin:0 0 8px">Quick Actions</h4>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" id="btnSchedule">Schedule Viewing</button>
              <button class="btn" id="btnMessage">Message Client</button>
              <button class="btn" id="btnCreateLead">Create Lead</button>
              <button class="btn" id="btnExportClients">Export Clients</button>
            </div>
          </div>

          <div class="card" style="padding:12px">
            <h4 style="margin:0 0 8px">Top Prospects</h4>
            <div id="agentTopProspects" style="display:flex;flex-direction:column;gap:8px"></div>
          </div>
        </aside>
      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/script.js"></script>
  <script>
    (function(){
      const leads = [
        {name:'Jamie Lee', property:'Riverside Tower', source:'Website', status:'Contacted', next:'Schedule viewing'},
        {name:'Sam K.', property:'Midtown Residences', source:'Referral', status:'New', next:'Call'},
        {name:'Rita Gomez', property:'Oakwood Apartments', source:'Portal', status:'Toured', next:'Offer'},
      ];
      const viewings = [
        {when:'2025-12-16 10:00', lead:'Jamie Lee', property:'Riverside Tower'},
        {when:'2025-12-17 14:30', lead:'Sam K.', property:'Midtown Residences'},
      ];
      const messages = [
        {from:'Jamie Lee', text:'Can we reschedule tomorrow?', time:'2h ago'},
        {from:'Rita Gomez', text:'Is parking included?', time:'1d ago'}
      ];

      document.getElementById('agentKpiLeads').textContent = leads.length;
      document.getElementById('agentKpiViewings').textContent = viewings.length;
      document.getElementById('agentKpiClients').textContent = 53;
      document.getElementById('agentKpiMsgs').textContent = messages.length;

      document.getElementById('agentLeadsBody').innerHTML = leads.map(l=>`
        <tr>
          <td><strong>${l.name}</strong></td>
          <td>${l.property}</td>
          <td>${l.source}</td>
          <td class="muted">${l.status}</td>
          <td>${l.next}</td>
          <td><button class="btn">Contact</button> <button class="btn">Schedule</button></td>
        </tr>
      `).join('');

      document.getElementById('agentViewingsList').innerHTML = viewings.map(v=>`• ${v.when} — ${v.lead} @ ${v.property}`).join('<br>');
      document.getElementById('agentMessages').innerHTML = messages.map(m=>`<strong>${m.from}</strong>: ${m.text} <div class="muted" style="font-size:12px">${m.time}</div>`).join('<hr style="border:none;border-top:1px solid #eee;margin:8px 0">');

      document.getElementById('agentTopProspects').innerHTML = leads.map(l=>`<div style="display:flex;justify-content:space-between"><div><strong>${l.name}</strong><div class="muted" style="font-size:13px">${l.property} • ${l.source}</div></div><div class="muted">${l.status}</div></div>`).join('');

      ['btnSchedule','btnMessage','btnCreateLead','btnExportLeads','btnExportClients','btnNewLead'].forEach(id=>{
        const el = document.getElementById(id);
        if (el) el.addEventListener('click', ()=> {
          const t = document.createElement('div'); t.textContent = 'Action "'+ (el.textContent || '').trim() + '" (demo)'; Object.assign(t.style,{position:'fixed',right:'18px',bottom:'18px',background:'#111',color:'#fff',padding:'10px',borderRadius:'8px'}); document.body.appendChild(t); setTimeout(()=>t.remove(),1600);
        });
      });

      // Small leads trend chart (optional)
      const barCanvas = document.createElement('canvas');
      if (window.Chart) {
        const container = document.createElement('div');
        container.style.height = '180px';
        container.style.marginTop = '12px';
        container.appendChild(barCanvas);
        document.querySelector('.panel > div')?.insertBefore(container, document.querySelector('.card'));
        new Chart(barCanvas, { type:'bar', data:{ labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'], datasets:[{ label:'New Leads', data:[2,3,1,4,3,2,1], backgroundColor:'#3b82f6' }]}, options:{ maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}} } });
      }
    })();
  </script>
</body>

</html>
